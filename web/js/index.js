(function(a){var t=function(a){var t=typeof a;return"object"===t&&!!a},n=function(a,n){return t(a)?n?a.x:a.y:a},e=function(a){for(var t=[],n=a.length,e=0;e<n;e++)t.push(a[e]);return t},r=function(a){a.originalData=a.datasets.map(function(a){return e(a.data)})},i=function(a,t,e){var r=a.datasets.map(function(a){if(!a._meta)return!0;for(var t in a._meta)return!a._meta[t].hidden}),i=0;a&&a.datasets&&a.datasets[0]&&a.datasets[0].data&&(i=a.datasets[0].data.length);var o=Array.apply(null,new Array(i)).map(function(e,i){return a.datasets.reduce(function(a,e,o){var c=e.stack;return a[c]||(a[c]=0),a[c]+=n(e.data[i],t)*r[o],a},{})});a.calculatedData=a.datasets.map(function(a,r){return a.data.map(function(r,i){var s=o[i][a.stack],u=n(r,t);return u&&s?c(u/s,e):0})})},o=function(a){var t=1;if(!a.hasOwnProperty("precision"))return t;if(!a.precision)return t;var n=Math.floor(a.precision);return isNaN(n)?t:n<0||n>16?t:n},c=function(a,t){var n=Math.pow(10,t);return Math.round(100*a*n)/n},s=function(a){return function(t,e){var r=t.datasetIndex,i=t.index,o=e.datasets[r].label||"",c=e.originalData[r][i],s=e.calculatedData[r][i];return""+o+": "+s+"% ("+n(c,a)+")"}},u=function(a,t){a&&a.forEach(function(a,n){t[n].data=a})},f=function(a){return"horizontalBar"===a.config.type},d={id:"stacked100",beforeInit:function(a,t){if(t.enable){var n=a.options.scales.xAxes,e=a.options.scales.yAxes,r="bar"===a.config.type||"line"===a.config.type;[n,e].forEach(function(a){a.forEach(function(a){a.stacked=!0})}),(r?e:n).forEach(function(a){a.ticks.min||(a.ticks.min=0),a.ticks.max||(a.ticks.max=100)}),t.hasOwnProperty("replaceTooltipLabel")&&!t.replaceTooltipLabel||(a.options.tooltips.callbacks.label=s(f(a)))}},beforeDatasetsUpdate:function(a,t){if(t.enable){r(a.data);var n=o(t);i(a.data,f(a),n),u(a.data.calculatedData,a.data.datasets)}},afterDatasetsUpdate:function(a,t){t.enable&&u(a.data.originalData,a.data.datasets)}};a.pluginService.register(d)}).call(this,Chart);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkNoYXJ0IiwiaXNPYmplY3QiLCJvYmoiLCJ0eXBlIiwiZGF0YVZhbHVlIiwiZGF0YVBvaW50IiwiaXNIb3Jpem9udGFsIiwieCIsInkiLCJjbG9uZUFycmF5Iiwic3JjQXJ5IiwiZHN0QXJ5IiwibGVuZ3RoIiwiaSIsInB1c2giLCJzZXRPcmlnaW5hbERhdGEiLCJkYXRhIiwib3JpZ2luYWxEYXRhIiwiZGF0YXNldHMiLCJtYXAiLCJkYXRhc2V0IiwiY2FsY3VsYXRlUmF0ZSIsInByZWNpc2lvbiIsInZpc2libGVzIiwiX21ldGEiLCJoaWRkZW4iLCJkYXRhc2V0RGF0YUxlbmd0aCIsInRvdGFscyIsIkFycmF5IiwiYXBwbHkiLCJlbCIsInJlZHVjZSIsInN1bSIsImoiLCJrZXkiLCJzdGFjayIsImNhbGN1bGF0ZWREYXRhIiwidmFsIiwidG90YWwiLCJkdiIsInJvdW5kIiwiZ2V0UHJlY2lzaW9uIiwicGx1Z2luT3B0aW9ucyIsImRlZmF1bHRQcmVjaXNpb24iLCJoYXNPd25Qcm9wZXJ0eSIsIm9wdGlvbnNQcmVjaXNpb24iLCJNYXRoIiwiZmxvb3IiLCJpc05hTiIsInZhbHVlIiwibXVsdGlwbGljYXRvciIsInBvdyIsInRvb2x0aXBMYWJlbCIsInRvb2x0aXBJdGVtIiwiZGF0YXNldEluZGV4IiwiaW5kZXgiLCJkYXRhc2V0TGFiZWwiLCJsYWJlbCIsIm9yaWdpbmFsVmFsdWUiLCJyYXRlVmFsdWUiLCJyZWZsZWN0RGF0YSIsInNyY0RhdGEiLCJmb3JFYWNoIiwiaXNIb3Jpem9udGFsQ2hhcnQiLCJjaGFydEluc3RhbmNlIiwiY29uZmlnIiwiU3RhY2tlZDEwMFBsdWdpbiIsImlkIiwiYmVmb3JlSW5pdCIsImVuYWJsZSIsInhBeGVzIiwib3B0aW9ucyIsInNjYWxlcyIsInlBeGVzIiwiaXNWZXJ0aWNhbCIsImF4ZXMiLCJoYXNoIiwic3RhY2tlZCIsInRpY2tzIiwibWluIiwibWF4IiwicmVwbGFjZVRvb2x0aXBMYWJlbCIsInRvb2x0aXBzIiwiY2FsbGJhY2tzIiwiYmVmb3JlRGF0YXNldHNVcGRhdGUiLCJhZnRlckRhdGFzZXRzVXBkYXRlIiwicGx1Z2luU2VydmljZSIsInJlZ2lzdGVyIiwiY2FsbCIsInRoaXMiXSwibWFwcGluZ3MiOiJDQUFDLFNBQVNBLEdBQ1IsR0FBSUMsR0FBVyxTQUFTQyxHQUN0QixHQUFJQyxTQUFjRCxFQUNsQixPQUFnQixXQUFUQyxLQUF1QkQsR0FHNUJFLEVBQVksU0FBU0MsRUFBV0MsR0FDbEMsTUFBSUwsR0FBU0ksR0FDSkMsRUFBZUQsRUFBVUUsRUFBSUYsRUFBVUcsRUFHekNILEdBR0xJLEVBQWEsU0FBU0MsR0FJeEIsSUFBSyxHQUhEQyxNQUNBQyxFQUFTRixFQUFPRSxPQUVYQyxFQUFJLEVBQUdBLEVBQUlELEVBQVFDLElBQzFCRixFQUFPRyxLQUFLSixFQUFPRyxHQUVyQixPQUFPRixJQUdMSSxFQUFrQixTQUFTQyxHQUM3QkEsRUFBS0MsYUFBZUQsRUFBS0UsU0FBU0MsSUFBSSxTQUFTQyxHQUM3QyxNQUFPWCxHQUFXVyxFQUFRSixTQUsxQkssRUFBZ0IsU0FBU0wsRUFBTVYsRUFBY2dCLEdBQy9DLEdBQUlDLEdBQVdQLEVBQUtFLFNBQVNDLElBQUksU0FBU0MsR0FDeEMsSUFBS0EsRUFBUUksTUFBTyxPQUFPLENBRTNCLEtBQUssR0FBSVgsS0FBS08sR0FBUUksTUFDcEIsT0FBUUosRUFBUUksTUFBTVgsR0FBR1ksU0FJekJDLEVBQW9CLENBQ3BCVixJQUFRQSxFQUFLRSxVQUFZRixFQUFLRSxTQUFTLElBQU1GLEVBQUtFLFNBQVMsR0FBR0YsT0FDaEVVLEVBQW9CVixFQUFLRSxTQUFTLEdBQUdGLEtBQUtKLE9BRTVDLElBQUllLEdBQVNDLE1BQU1DLE1BQU0sS0FBTSxHQUFJRCxPQUFNRixJQUFvQlAsSUFBSSxTQUFTVyxFQUFJakIsR0FDNUUsTUFBT0csR0FBS0UsU0FBU2EsT0FBTyxTQUFTQyxFQUFLWixFQUFTYSxHQUNqRCxHQUFJQyxHQUFNZCxFQUFRZSxLQUls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c0IsS0FBS0MsS0FBTXpGIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKENoYXJ0KSB7XG4gIHZhciBpc09iamVjdCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciB0eXBlID0gdHlwZW9mIG9iajtcbiAgICByZXR1cm4gdHlwZSA9PT0gJ29iamVjdCcgJiYgISFvYmo7XG4gIH1cblxuICB2YXIgZGF0YVZhbHVlID0gZnVuY3Rpb24oZGF0YVBvaW50LCBpc0hvcml6b250YWwpIHtcbiAgICBpZiAoaXNPYmplY3QoZGF0YVBvaW50KSkge1xuICAgICAgcmV0dXJuIGlzSG9yaXpvbnRhbCA/IGRhdGFQb2ludC54IDogZGF0YVBvaW50Lnk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGFQb2ludDtcbiAgfVxuXG4gIHZhciBjbG9uZUFycmF5ID0gZnVuY3Rpb24oc3JjQXJ5KSB7XG4gICAgdmFyIGRzdEFyeSA9IFtdO1xuICAgIHZhciBsZW5ndGggPSBzcmNBcnkubGVuZ3RoO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgZHN0QXJ5LnB1c2goc3JjQXJ5W2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGRzdEFyeTtcbiAgfTtcblxuICB2YXIgc2V0T3JpZ2luYWxEYXRhID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIGRhdGEub3JpZ2luYWxEYXRhID0gZGF0YS5kYXRhc2V0cy5tYXAoZnVuY3Rpb24oZGF0YXNldCkge1xuICAgICAgcmV0dXJuIGNsb25lQXJyYXkoZGF0YXNldC5kYXRhKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBzZXQgY2FsY3VsYXRlZCByYXRlICh4eCUpIHRvIGRhdGEuY2FsY3VsYXRlZERhdGFcbiAgdmFyIGNhbGN1bGF0ZVJhdGUgPSBmdW5jdGlvbihkYXRhLCBpc0hvcml6b250YWwsIHByZWNpc2lvbikge1xuICAgIHZhciB2aXNpYmxlcyA9IGRhdGEuZGF0YXNldHMubWFwKGZ1bmN0aW9uKGRhdGFzZXQpIHtcbiAgICAgIGlmICghZGF0YXNldC5fbWV0YSkgcmV0dXJuIHRydWU7XG5cbiAgICAgIGZvciAodmFyIGkgaW4gZGF0YXNldC5fbWV0YSkge1xuICAgICAgICByZXR1cm4gIWRhdGFzZXQuX21ldGFbaV0uaGlkZGVuO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHZhciBkYXRhc2V0RGF0YUxlbmd0aCA9IDA7XG4gICAgaWYgKGRhdGEgJiYgZGF0YS5kYXRhc2V0cyAmJiBkYXRhLmRhdGFzZXRzWzBdICYmIGRhdGEuZGF0YXNldHNbMF0uZGF0YSkge1xuICAgICAgZGF0YXNldERhdGFMZW5ndGggPSBkYXRhLmRhdGFzZXRzWzBdLmRhdGEubGVuZ3RoO1xuICAgIH1cbiAgICB2YXIgdG90YWxzID0gQXJyYXkuYXBwbHkobnVsbCwgbmV3IEFycmF5KGRhdGFzZXREYXRhTGVuZ3RoKSkubWFwKGZ1bmN0aW9uKGVsLCBpKSB7XG4gICAgICByZXR1cm4gZGF0YS5kYXRhc2V0cy5yZWR1Y2UoZnVuY3Rpb24oc3VtLCBkYXRhc2V0LCBqKSB7XG4gICAgICAgIHZhciBrZXkgPSBkYXRhc2V0LnN0YWNrO1xuICAgICAgICBpZiAoIXN1bVtrZXldKSBzdW1ba2V5XSA9IDA7XG4gICAgICAgIHN1bVtrZXldICs9IGRhdGFWYWx1ZShkYXRhc2V0LmRhdGFbaV0sIGlzSG9yaXpvbnRhbCkgKiB2aXNpYmxlc1tqXTtcblxuICAgICAgICByZXR1cm4gc3VtO1xuICAgICAgfSwge30pO1xuICAgIH0pO1xuXG4gICAgZGF0YS5jYWxjdWxhdGVkRGF0YSA9IGRhdGEuZGF0YXNldHMubWFwKGZ1bmN0aW9uKGRhdGFzZXQsIGkpIHtcbiAgICAgIHJldHVybiBkYXRhc2V0LmRhdGEubWFwKGZ1bmN0aW9uKHZhbCwgaSkge1xuICAgICAgICB2YXIgdG90YWwgPSB0b3RhbHNbaV1bZGF0YXNldC5zdGFja107XG4gICAgICAgIHZhciBkdiA9IGRhdGFWYWx1ZSh2YWwsIGlzSG9yaXpvbnRhbCk7XG4gICAgICAgIHJldHVybiBkdiAmJiB0b3RhbCA/IHJvdW5kKGR2IC8gdG90YWwsIHByZWNpc2lvbikgOiAwO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdldFByZWNpc2lvbiA9IGZ1bmN0aW9uKHBsdWdpbk9wdGlvbnMpIHtcbiAgICAvLyByZXR1cm4gdGhlICh2YWxpZGF0ZWQpIGNvbmZpZ3VyZWQgcHJlY2lzaW9uIGZyb20gcGx1Z2luT3B0aW9ucyBvciBkZWZhdWx0IDFcbiAgICB2YXIgZGVmYXVsdFByZWNpc2lvbiA9IDE7XG4gICAgaWYgKCFwbHVnaW5PcHRpb25zLmhhc093blByb3BlcnR5KFwicHJlY2lzaW9uXCIpKSByZXR1cm4gZGVmYXVsdFByZWNpc2lvbjtcbiAgICBpZiAoIXBsdWdpbk9wdGlvbnMucHJlY2lzaW9uKSByZXR1cm4gZGVmYXVsdFByZWNpc2lvbjtcbiAgICB2YXIgb3B0aW9uc1ByZWNpc2lvbiA9IE1hdGguZmxvb3IocGx1Z2luT3B0aW9ucy5wcmVjaXNpb24pO1xuICAgIGlmIChpc05hTihvcHRpb25zUHJlY2lzaW9uKSkgcmV0dXJuIGRlZmF1bHRQcmVjaXNpb247XG4gICAgaWYgKG9wdGlvbnNQcmVjaXNpb24gPCAwIHx8IG9wdGlvbnNQcmVjaXNpb24gPiAxNikgcmV0dXJuIGRlZmF1bHRQcmVjaXNpb247IFxuICAgIHJldHVybiBvcHRpb25zUHJlY2lzaW9uO1xuICB9O1xuXG4gIHZhciByb3VuZCA9IGZ1bmN0aW9uKHZhbHVlLCBwcmVjaXNpb24pIHtcbiAgICB2YXIgbXVsdGlwbGljYXRvciA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24pO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlICogMTAwICogbXVsdGlwbGljYXRvcikgLyBtdWx0aXBsaWNhdG9yO1xuICB9O1xuXG4gIHZhciB0b29sdGlwTGFiZWwgPSBmdW5jdGlvbihpc0hvcml6b250YWwpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odG9vbHRpcEl0ZW0sIGRhdGEpIHtcbiAgICAgIHZhciBkYXRhc2V0SW5kZXggPSB0b29sdGlwSXRlbS5kYXRhc2V0SW5kZXg7XG4gICAgICB2YXIgaW5kZXggPSB0b29sdGlwSXRlbS5pbmRleDtcbiAgICAgIHZhciBkYXRhc2V0TGFiZWwgPSBkYXRhLmRhdGFzZXRzW2RhdGFzZXRJbmRleF0ubGFiZWwgfHwgXCJcIjtcbiAgICAgIHZhciBvcmlnaW5hbFZhbHVlID0gZGF0YS5vcmlnaW5hbERhdGFbZGF0YXNldEluZGV4XVtpbmRleF07XG4gICAgICB2YXIgcmF0ZVZhbHVlID0gZGF0YS5jYWxjdWxhdGVkRGF0YVtkYXRhc2V0SW5kZXhdW2luZGV4XTtcblxuICAgICAgcmV0dXJuIFwiXCIgKyBkYXRhc2V0TGFiZWwgKyBcIjogXCIgKyByYXRlVmFsdWUgKyBcIiUgKFwiICsgZGF0YVZhbHVlKG9yaWdpbmFsVmFsdWUsIGlzSG9yaXpvbnRhbCkgKyBcIilcIjtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHJlZmxlY3REYXRhID0gZnVuY3Rpb24oc3JjRGF0YSwgZGF0YXNldHMpIHtcbiAgICBpZiAoIXNyY0RhdGEpIHJldHVybjtcblxuICAgIHNyY0RhdGEuZm9yRWFjaChmdW5jdGlvbihkYXRhLCBpKSB7XG4gICAgICBkYXRhc2V0c1tpXS5kYXRhID0gZGF0YTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgaXNIb3Jpem9udGFsQ2hhcnQgPSBmdW5jdGlvbihjaGFydEluc3RhbmNlKSB7XG4gICAgcmV0dXJuIGNoYXJ0SW5zdGFuY2UuY29uZmlnLnR5cGUgPT09IFwiaG9yaXpvbnRhbEJhclwiO1xuICB9XG5cbiAgdmFyIFN0YWNrZWQxMDBQbHVnaW4gPSB7XG4gICAgaWQ6IFwic3RhY2tlZDEwMFwiLFxuXG4gICAgYmVmb3JlSW5pdDogZnVuY3Rpb24oY2hhcnRJbnN0YW5jZSwgcGx1Z2luT3B0aW9ucykge1xuICAgICAgaWYgKCFwbHVnaW5PcHRpb25zLmVuYWJsZSkgcmV0dXJuO1xuXG4gICAgICB2YXIgeEF4ZXMgPSBjaGFydEluc3RhbmNlLm9wdGlvbnMuc2NhbGVzLnhBeGVzO1xuICAgICAgdmFyIHlBeGVzID0gY2hhcnRJbnN0YW5jZS5vcHRpb25zLnNjYWxlcy55QXhlcztcbiAgICAgIHZhciBpc1ZlcnRpY2FsID0gY2hhcnRJbnN0YW5jZS5jb25maWcudHlwZSA9PT0gXCJiYXJcIiB8fCBjaGFydEluc3RhbmNlLmNvbmZpZy50eXBlID09PSBcImxpbmVcIjtcblxuICAgICAgW3hBeGVzLCB5QXhlc10uZm9yRWFjaChmdW5jdGlvbihheGVzKSB7XG4gICAgICAgIGF4ZXMuZm9yRWFjaChmdW5jdGlvbihoYXNoKSB7XG4gICAgICAgICAgaGFzaC5zdGFja2VkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIChpc1ZlcnRpY2FsID8geUF4ZXMgOiB4QXhlcykuZm9yRWFjaChmdW5jdGlvbihoYXNoKSB7XG4gICAgICAgIGlmICghaGFzaC50aWNrcy5taW4pIGhhc2gudGlja3MubWluID0gMDtcbiAgICAgICAgaWYgKCFoYXNoLnRpY2tzLm1heCkgaGFzaC50aWNrcy5tYXggPSAxMDA7XG4gICAgICB9KTtcblxuICAgICAgLy8gUmVwbGFjZSB0b29sdGlwc1xuICAgICAgaWYgKHBsdWdpbk9wdGlvbnMuaGFzT3duUHJvcGVydHkoXCJyZXBsYWNlVG9vbHRpcExhYmVsXCIpICYmICFwbHVnaW5PcHRpb25zLnJlcGxhY2VUb29sdGlwTGFiZWwpIHJldHVybjtcbiAgICAgIGNoYXJ0SW5zdGFuY2Uub3B0aW9ucy50b29sdGlwcy5jYWxsYmFja3MubGFiZWwgPSB0b29sdGlwTGFiZWwoaXNIb3Jpem9udGFsQ2hhcnQoY2hhcnRJbnN0YW5jZSkpO1xuICAgIH0sXG5cbiAgICBiZWZvcmVEYXRhc2V0c1VwZGF0ZTogZnVuY3Rpb24oY2hhcnRJbnN0YW5jZSwgcGx1Z2luT3B0aW9ucykge1xuICAgICAgaWYgKCFwbHVnaW5PcHRpb25zLmVuYWJsZSkgcmV0dXJuO1xuXG4gICAgICBzZXRPcmlnaW5hbERhdGEoY2hhcnRJbnN0YW5jZS5kYXRhKTtcbiAgICAgIHZhciBwcmVjaXNpb24gPSBnZXRQcmVjaXNpb24ocGx1Z2luT3B0aW9ucyk7XG4gICAgICBjYWxjdWxhdGVSYXRlKGNoYXJ0SW5zdGFuY2UuZGF0YSwgaXNIb3Jpem9udGFsQ2hhcnQoY2hhcnRJbnN0YW5jZSksIHByZWNpc2lvbik7XG4gICAgICByZWZsZWN0RGF0YShjaGFydEluc3RhbmNlLmRhdGEuY2FsY3VsYXRlZERhdGEsIGNoYXJ0SW5zdGFuY2UuZGF0YS5kYXRhc2V0cyk7XG4gICAgfSxcblxuICAgIGFmdGVyRGF0YXNldHNVcGRhdGU6IGZ1bmN0aW9uKGNoYXJ0SW5zdGFuY2UsIHBsdWdpbk9wdGlvbnMpIHtcbiAgICAgIGlmICghcGx1Z2luT3B0aW9ucy5lbmFibGUpIHJldHVybjtcblxuICAgICAgcmVmbGVjdERhdGEoY2hhcnRJbnN0YW5jZS5kYXRhLm9yaWdpbmFsRGF0YSwgY2hhcnRJbnN0YW5jZS5kYXRhLmRhdGFzZXRzKTtcbiAgICB9XG4gIH07XG5cbiAgQ2hhcnQucGx1Z2luU2VydmljZS5yZWdpc3RlcihTdGFja2VkMTAwUGx1Z2luKTtcbn0uY2FsbCh0aGlzLCBDaGFydCkpO1xuIl19
